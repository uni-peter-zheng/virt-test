# Only put module name in here, 
# You can use '#' to ignore some modules
# Module name corresponding files in ./libvirt or ./qemu

libvirt:virsh_help
libvirt:virsh_cpu_compare  #virsh capavilities内缺少host的cpu features列表，所以凡是delete和modefy features的用例都FAIL 或SKIP
libvirt:virsh_cpu_stats
libvirt:libvirt_scsi
libvirt:virsh_cpu_baseline
libvirt:virsh_domname
libvirt:virsh_numatune
libvirt:virsh_undefine
libvirt:virsh_domblkstat
libvirt:virsh_domifstat
libvirt:virsh_sysinfo
libvirt:virsh_nodecpumap
libvirt:virsh_cpu_models
libvirt:virsh_node_memtune  # 1 FAIL 已经注释
libvirt:virsh_nodememstats
libvirt:virsh_maxvcpus
libvirt:virsh_itself
libvirt:libvirt_qemu_cmdline  #2 FAIL redhat有对应bug ：https://bugzilla.redhat.com/show_bug.cgi?format=multiple&id=1235511
libvirt:virsh_domdisplay
libvirt:virsh_connect #1 SKIP 缺少xen驱动
libvirt:virsh_emulatorpin
libvirt:virsh_memtune
libvirt:virsh_iface_edit
libvirt:virsh_iface_trans
libvirt:virt-clone #部分用例测试有错误，暂时注释掉了。
libvirt:virsh_vcpuinfo
libvirt:virsh_uri
libvirt:virsh_version
libvirt:virsh_domstats
libvirt:usb_hotplug
libvirt:virsh_domuuid
libvirt:virsh_domxml_from_native
libvirt:virsh_domxml_to_native
libvirt:virsh_vcpupin   #部分用例需要多台虚拟机，先注释掉
libvirt:virsh_vncdisplay
libvirt:virsh_domcapabilities
libvirt:virsh_nodecpustats
libvirt:virsh_nodeinfo  # 1 FAIL，已经注释
libvirt:virsh_save_image_edit
libvirt:virsh_nodedev_dumpxml
libvirt:virsh_nodedev_list  
libvirt:virsh_domid 
libvirt:virsh_net_autostart
libvirt:virsh_net_create
libvirt:virsh_net_define_undefine  
libvirt:virsh_net_destroy
libvirt:virsh_net_dhcp_leases #一个报错是因为PCI hotplug，另一个是已确认bug，不检测mac地址合法性
libvirt:virsh_net_dumpxml
libvirt:virsh_net_edit
libvirt:virsh_net_info
libvirt:virsh_net_list
libvirt:virsh_net_name
libvirt:virsh_net_start
libvirt:virsh_net_update  #bridge,forward,ip这三个section不支持net-update
libvirt:virsh_net_uuid
libvirt:virsh_hostname
libvirt:virsh_freecell
libvirt:virsh_list
libvirt:virsh_domjobinfo
libvirt:virsh_domiflist
libvirt:virsh_metadata
libvirt:virsh_start
libvirt:virsh_secret_define_undefine
libvirt:virsh_secret_dumpxml
libvirt:virsh_secret_list
libvirt:virsh_secret_set_get
libvirt:virsh_nwfilter_define
libvirt:virsh_nwfilter_dumpxml
libvirt:virsh_nwfilter_edit
libvirt:virsh_nwfilter_list
libvirt:virsh_nwfilter_undefine
libvirt:virsh_dumpxml
libvirt:virsh_save_image_define
libvirt:virsh_change_media          # 需要mkisofs,安装包genisoimage ；注释掉ide和floppy>的用例
libvirt:virsh_domif_setlink_getlink
libvirt:storage_pool
libvirt:virsh_destory  #设置remote无密码ssh后，可pass
libvirt:virsh_vcpucount
libvirt:virsh_vol_clone_wipe  #TestNAError: Option --prealloc-metadata is not supported.使用virsh help vol-wipe查看是否有参数--prealloc-metadata，没有则跳过这次，手动查询确实不支持这个参数；全部8个SKIP都是这个原因
libvirt:virsh_vol_create_from  
libvirt:virsh_vol_create
libvirt:virsh_vol_download_upload #原因是download部分完成后会对文件做md5校验，不知道为什么会出现检验值不等的情况.我将源码的md5校验部分注释掉，用例可全部PASS;目前先暂时将这部分用例注释，不做修改
libvirt:virsh_vol_resize #四个FAIL是因为在resize后，capacity大小和预期一致，而allocation大小测试不加--shrink，表示不压缩，而我们的系统会默认进行压缩。 修改源码将resize之后的size check注释之后可PASS
libvirt:virsh_volume #gluster 跳过两个用例
libvirt:hotplug_serial
libvirt:virsh_autostart
libvirt:virsh_domblklist
libvirt:virsh_dump
libvirt:virsh_edit
libvirt:virsh_qemu_agent_command   #不支持--aysnc选项,修改max_id和min_id
libvirt:virsh_blockjob
libvirt:virsh_reboot
libvirt:virsh_resume
libvirt:virsh_schedinfo_qemu_posix
libvirt:multifunction
libvirt:virsh_domfsthaw
libvirt:virsh_qemu_agent_command_fs
libvirt:virsh_reset
libvirt:virsh_shutdown
libvirt:svirt                       #注释掉相关hos
libvirt:virsh_create 
libvirt:virsh_desc
libvirt:virsh_migrate_compcache
libvirt:virsh_save
libvirt:virsh_setvcpus
libvirt:virsh_domcontrol
libvirt:virsh_restore
libvirt:virsh_domjobabort
libvirt:virsh_managedsave
libvirt:virsh_ttyconsole
libvirt:virsh_domiftune
libvirt:virsh_define_undefine
libvirt:virsh_domfstrim
libvirt:virsh_console         
libvirt:virsh_event 
#比较耗时间的用例

#比较容易出问题的模块放到最后
libvirt:guest_numa                  #numa的用例可能导致libvirtd启动失败[发现原因是由于该用例修改qemu.conf内hugetlbfs挂载点为/dev/hugepages16M，当umount掉这个挂载点后，qemu.conf依然生效，导致libvirtd启动失败]
#no_nodemem的用例需要修改guest-numa.cfg,因为我们的版本对memtune的参数规则和autotest的要求不太一样；其他用例失败是系统不支持2M,1G的大页表，也不能把全部host大页分配给一个虚拟机。
libvirt:snapshot                    #注释掉部分失败的用例,快照部分的用例，测试完不恢复img,可能导致后面的用例使用virsh undefine失败，所以放在最后

#新增用例，可能容易出问题，放到最后面
libvirt:hugepage  #注释掉部分用例
libvirt:virsh_screenshot #已注释部分用例
libvirt:virsh_qemu_monitor_command  #修改源码，增加测试前判断虚机状态语句
libvirt:virsh_qemu_attach           #注释掉两个用例
libvirt:virsh_setmaxmem  不支持虚拟机运行时修改大内存

#暂时跳过的模块，错误太多，还未修正；测试环境不满足，网络，磁盘，安装包等方面有特殊要求
#libvirt:perf_kvm                    #我们的源上缺少fuse-sshfs，注释掉模块
#libvirt:vcpu_hotplug                #错误太多，未修正，4PASS,19FAIL
#libvirt:storage_discard             #错误太多，未修正，5PASS,24FAIL
#libvirt:migration                   #迁移用例，p2p 迁移不支持
#libvirt:virsh_migrate_copy_storage  #迁移用例
#libvirt:virsh_migrate_multi_vms     #迁移用例
#libvirt:virsh_migrate_set_get_speed #迁移用例
#libvirt:virsh_migrate_setmaxdowntime#迁移用例
#libvirt:virsh_migrate_stress        #迁移用例
#libvirt:network_bandwidth           #网络用例 需要把虚拟机网络设置为default形式，我们现在默认使用br0，暂时跳过这组用例
#libvirt:iface                       #网络用例 部分测试导致网络不通,测试环境配置未处理
#libvirt:iface_bridge                #网络用例 部分测试导致网络不通,测试环境配置未处理
#libvirt:macvtap                     #网络用例 需要多块网卡同时开启，部分测试导致网络不通,测试环境配置未处理
#libvirt:virsh-attach-detach-disk     #device用例
#libvirt:virsh-attach-detach-interface#device用例
#libvirt:attach_device               #device用例 有接近1000测试用例，需要单独测试
#libvirt:virsh_detach_device         #device用例
#libvirt:virsh_qemu_attach           #device用例
#libvirt:virsh_update_device         #device用例 不支持ide floppy设备
#libvirt:virsh_blockcommit           #block用例 部分用例需要raw格式的磁盘,还有其他相关gluster的用例先注释掉.这组用例可能会导致测试环境损坏，暂时注释模块
#libvirt:virsh_blockcopy             #block用例 需要使用virtio的VDA磁盘；--blockdev的用例需要在源码里把版本比对去掉，里面规定libvirt1.2.13以上才测试这个功能；并且会创建iscsi设备，需要安装targetcli*和iscsi*，此组测试用例特别耗时间。
#libvirt:virsh_domblkerror           #block用例
#libvirt:virsh_qemu_monitor_blockjob #block用例
#libvirt:virsh_domblkinfo            #block用例
#libvirt:virsh_qemu_monitor_command  #VM 'RedOS-autotest' failed to start: error: Domain is already active 用例测试之前是需要将虚拟机关闭，由于设置了--keep-guest-running这一组用例报错。暂时将其跳过
#libvirt:virsh_sendkey               #测试用例命令执行发生错误
#libvirt:virsh_suspend               #
#libvirt:virsh_capabilities          #
#libvirt:virsh_freepages             #
#libvirt:virsh_domstate              #
#libvirt:virsh_voume_application     #
#libvirt:virt-top                    #还未测试
#libvirt:virt_what                   #
#libvirt:virt_xml_validate           #
#libvirt:qemu-guest-agent            #
#libvirt:unattended_install          #
#libvirt:virstual_disks              #ALL FAIL，原因可能是测试用例定义的设备名如sda和现有的xml中的重复了


#系统不支持的测试模块
#libvirt:pci_passthrough   系统不支持
#libvirt:ksm_service  缺少ksmtuned服务
#libvirt:timer_management 不支持kvmclock
#libvirt:virsh_blockresize   7个SKIP，因为qed_type不支持；15个FAIL因为pci.0不支持hotplug 
#libvirt:virsh_create_lxc  lxc不需要测试
#libvirt:virsh_dompmsuspend  #需要virsh capcabilities的xml提供能力支持才行 setting ACPI S3 not supported
#libvirt:virsh_schedinfo_xen_credit   xen的虚拟化测试，用不到
#libvirt:virsh_setmem    不支持，需要对源码做修改，暂时注释模块
#libvirt:virsh_nodesuspend   不支持nodesuspend
#libvirt:virsh_nodedev_create_destroy 需要HBA设备
#libvirt:virsh_nodedev_detach_reattach 需要在配置文件设置用于测试detach的PCI总线，手动测试虚拟机的每条PCI总线在detach时都会报错。
#libvirt:virsh_nodedev_reset #需要设置测试使用的special_device，但格式不清楚，尝试设置了多个值都报参数错误；查看源码可知，其实在设置的参数值不满足条件时，用例会自动检索host中的pci设备，由于我们host上的设备都不能resetable，所以用例报错，不过此处用例报错信息给的不准确
#libvirt:vfio                #Please add 'intel_iommu=on' to kernel and reboot to effect it 

#QEMU测试模块
#
#qemu:qemu_unattended_install
#qemu:qemu_nic_hotplug
#qemu:qemu_timedrift_no_net
#qemu:qemu_live_snapshot
#qemu:qemu_watchdog
#qemu:qemu_qemu_guest_agent
#qemu:qemu_qmp_event_notification
#qemu:multi_disk_random_hotplug
#qemu:qemu_disk_img
#qemu:mq_change_qnum
#qemu:qemu_usb
#qemu:qemu_img
#qemu:set_link
#qemu:boot_from_device
#qemu:qemu_timerdevice
#qemu:qemu_virtio_console
#qemu:live_snapshot_chain
#qemu:qemu_performance
#qemu:qemu_balloon_check
#qemu:qemu_io_blkdebug
#qemu:qemu_pci_hotplug
#qemu:qemu_rv
#qemu:block_stream
#qemu:qemu_cgroup
#qemu:openflow_test
#qemu:drive_mirror
#qemu:qemu_migrate
#qemu:qemu_iotests
#qemu:timedrift_adjust_time
#qemu:qmp_command
#qemu:openflow_acl_test
#qemu:multi_nics_hotplug
#qemu:numa_opts
#libvirt:domuuid.normal_test
#qemu:cpuflags.interface
#libvirt:domblkerror
#qemu:qcow2perf
